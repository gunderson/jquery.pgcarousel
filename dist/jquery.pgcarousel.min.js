/*! jQuery.PGCarousel - v0.1.0 - 2013-02-27
* https://github.com/gunderson/jquery.pgcarousel
* Copyright (c) 2013 Patrick Gunderson; Licensed MIT */
(function(e){e.pgCarousel=function(t,n){var o=this;o.$el=e(t),o.el=t,o.numActivePages=0,o.$el.data("pgCarousel",o),o.init=function(){o.el=t,o.options=e.extend(!0,{},e.pgCarousel.options,n),o.$el=e(this.el),o.generate()},o.generate=function(){o.options.$pages=o.$el.find(".pages"),o.options.$pages.length||(o.options.$pages=e("<div/>").addClass("pages"),o.$el.append(o.options.$pages))},o.numPages=function(){return Math.ceil(o.options.$currentSet.length/o.options.pageLength)},o.page=function(e,t){return arguments.length>0?(o.options.currentPageIndex=e,o.showCarouselPage(t)):o.options.currentPageIndex},o.nextPage=function(e){return o.options.currentPageIndex<o.numPages()-1?(o.options.currentPageIndex++,o.showCarouselPage(e)):o},o.prevPage=function(e){return o.options.currentPageIndex>0?(o.options.currentPageIndex--,o.showCarouselPage(e)):o},o.findPageWith=function(e){var t=o.options.$currentSet.indexOf(e),n=t/o.options.pageLength>>0;return n},o.removeItem=function(t){return"[object Array]"!==Object.prototype.toString.call(t)&&(t=[t]),e.each(t,function(e,t){var n=o.options.$carouselItems.indexOf(t);-1!=n&&o.options.$carouselItems.splice(n,1)}),o},o.addItem=function(e,t){switch(t=t!==void 0?t:-1){case-1:o.options.$carouselItems.push(e);break;case 0:o.options.$carouselItems.unshift(e);break;default:o.options.$carouselItems.splice(t,0,e)}return o.options.filterOptions?o.filterSet(o.options.filterOptions):o.options.$currentSet=o.options.$carouselItems,o},o.filterSet=function(e){for(var t,n=[],r=o.options.$carouselItems,i=-1,a=r.length;a>++i;){t=!0;for(var s in e)r[i].model.get(s)==e[s]||(t=!1);t&&n.push(r[i])}return o.options.$currentSet=n,o},o.showCarouselPage=function(t){o.options.$prevPage=o.options.$page;var n=o.options.$prevPage,r=o.options.currentPageIndex,i=o.options.pageLength,a=o.options.$currentSet,s=o.options.$pages,p=o.options.animationTime,u=o.options.$page=ich.mainCarouselPageTemplate();r%2&&u.addClass("right"),u.addClass("carouselPage").css({display:"none",position:"absolute"}).data({page:r});var g=0;n&&(g=n.data("page")>r?-1:1);var l=r*i,c=a.slice(l,l+i);return e.each(c,function(e,t){u.find(".items").append(t.$el)}),s.append(u),t?(u.css({display:"block",y:0}),n&&n.detach()):(u.css({display:"block",y:g*s.height()}).transition({y:0},p,"snap"),n&&n.stop().transition({y:-(g*s.height())},p,"snap",function(){e(this).detach()})),o},o.areCongreuent=function(e,t){var n;if(e===t)return!0;if(!e||!t)return!1;for(n in t)if(e[n]===void 0)return!1;for(n in t)if(t[n])switch(typeof t[n]){case"object":if(!t[n].equals(e[n]))return!1;break;case"function":if(e[n]===void 0||"equals"!=n&&""+t[n]!=""+e[n])return!1;break;default:if(t[n]!=e[n])return!1}else if(e[n])return!1;for(n in e)if(t[n]===void 0)return!1;return!0},o.init()},e.pgCarousel.options={$currentSet:[],$carouselItems:[],prevPageIndex:-1,$prevPage:null,currentPageIndex:0,$page:null,pageLength:24,filterOptions:null,animationTime:1200,animationIndex:0,$pages:null},e.fn.pgCarousel=function(t){if(t&&"string"==typeof t){var n;if(n=this[0].pgcarousel){if("page"===t)return n.page();if("numPages"===t)return n.numPages();if("carouselItems"===t)return n.options.$carouselItems}}return this.each(function(){var n,o;if((o=this.pgcarousel)||(n=e.extend({},e.pgCarousel.options,t),this.pgcarousel=o=new e.pgCarousel(this,n)),t&&"object"==typeof t){if(e.extend(o.options,t),t.gotoPage)return o.page(t.gotoPage);if(t.carouselItems)return o.options.$carouselItems=t.carouselItems,o.page(0,!0);if(t.add)return o.addItem(t.add,t.at),o.page(o.options.currentPageIndex,!0);if(t.remove)return o.removeItem(t.remove),o.page(o.options.currentPageIndex,!0);if(t.move){var r=t.move.item;return o.removeItem(r),o.addItem(r,t.move.to),o.page(o.options.currentPageIndex,!0)}if(t.filter)return o.areCongreuent(o.options.filterOptions,t.filter)?this:(o.options.filterOptions=t.filter,o.filterSet(t.filter),o.page(0,!0));if(t.show){var i=o.findPageWith(t.show);return o.page(i,!0)}}else if(t&&"string"==typeof t){if("next"===t)return o.nextPage();if("prev"===t)return o.prevPage()}return this})}})(jQuery);